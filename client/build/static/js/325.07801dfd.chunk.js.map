{"version":3,"file":"static/js/325.07801dfd.chunk.js","mappings":"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","sources":["Routes/Login.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Button from \"@mui/material/Button\";\r\nimport TextField from \"@mui/material/TextField\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport AuthService from \"../services/auth.service\";\r\nimport Spinner from \"../components/Spinner\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nconst user = AuthService.getCurrentUser();\r\n\r\nexport default function SignIn() {\r\n  useEffect(() => {\r\n    if (!!user) {\r\n      AuthService.logout();\r\n      window.location.reload();\r\n    }\r\n  }, []);\r\n\r\n  const navigate = useNavigate();\r\n  const [Loading, setLoading] = useState(false);\r\n  const [data, setData] = useState({\r\n    phone: \"\",\r\n    password: \"hello\",\r\n  });\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n\r\n    setData((prev) => {\r\n      return {\r\n        ...prev,\r\n        [name]: value,\r\n      };\r\n    });\r\n  };\r\n\r\n  const handleLogin = (e) => {\r\n    e.preventDefault();\r\n    if ( data.phone) {\r\n      setLoading(true);\r\n      AuthService.login(data.phone, data.password).then(\r\n        (res) => {\r\n          if (res.role === \"farmer\") {\r\n            toast.success(\"Login successful!\", {\r\n              position: \"top-center\",\r\n              autoClose: 3000,\r\n              hideProgressBar: false,\r\n              closeOnClick: true,\r\n              pauseOnHover: true,\r\n              draggable: true,\r\n              progress: undefined,\r\n              theme: \"light\",\r\n            });\r\n            setTimeout(() => {\r\n              navigate(\"/farmers\");\r\n              window.location.reload();\r\n            }, 1000);\r\n          }\r\n          if (res.role === \"admin\") {\r\n            toast.success(\"Login successful!\", {\r\n              position: \"top-center\",\r\n              autoClose: 3000,\r\n              hideProgressBar: false,\r\n              closeOnClick: true,\r\n              pauseOnHover: true,\r\n              draggable: true,\r\n              progress: undefined,\r\n              theme: \"light\",\r\n            });\r\n            setTimeout(() => {\r\n              navigate(\"/admin\");\r\n            window.location.reload();\r\n            }, 1000);\r\n          }\r\n          if (res.role === \"customer\") {\r\n            toast.success(\"Login successful!\", {\r\n              position: \"top-center\",\r\n              autoClose: 3000,\r\n              hideProgressBar: false,\r\n              closeOnClick: true,\r\n              pauseOnHover: true,\r\n              draggable: true,\r\n              progress: undefined,\r\n              theme: \"light\",\r\n            });\r\n            setTimeout(() => {\r\n              navigate(\"/customers\");\r\n              window.location.reload();\r\n            }, 1000);\r\n          }\r\n          setLoading(false);\r\n        },\r\n        (error) => {\r\n          console.log(error)\r\n          toast.warn(\"Login failed\", {\r\n            position: \"top-center\",\r\n            autoClose: 5000,\r\n            hideProgressBar: false,\r\n            closeOnClick: true,\r\n            pauseOnHover: true,\r\n            draggable: true,\r\n            progress: undefined,\r\n            theme: \"light\",\r\n          });\r\n          setData({\r\n            phone: \"\",\r\n            password: \"\",\r\n          });\r\n          setLoading(false);\r\n        }\r\n      );\r\n    } else {\r\n      toast.warn(\"data invalid\", {\r\n        position: \"top-center\",\r\n        autoClose: 5000,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n        theme: \"light\",\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"authContainer\">\r\n      <ToastContainer\r\n        position=\"top-right\"\r\n        autoClose={5000}\r\n        hideProgressBar={false}\r\n        newestOnTop={false}\r\n        closeOnClick\r\n        rtl={false}\r\n        pauseOnFocusLoss\r\n        draggable\r\n        pauseOnHover\r\n        theme=\"light\"\r\n      />\r\n      {/* Same as */}\r\n      <ToastContainer />\r\n      {!Loading ? (\r\n        <div className=\"authbox\">\r\n          <img\r\n            className=\"login_image\"\r\n            src=\"./images/2.png\"\r\n            alt=\"logo\"\r\n          />\r\n          <form onSubmit={handleLogin} className=\"login_details\">\r\n            {/* <Avatar sx={{ m: 1, bgcolor: 'secondary.main' }}>\r\n              </Avatar> */}\r\n            <img className=\"form-logo\" src=\"./logo.png\" alt=\"form-logo\" />\r\n            <Typography component=\"h1\" variant=\"h5\" className=\"form-link\">\r\n              <span className=\"heading\">Welcome to Wingrowagritech</span>\r\n            </Typography>\r\n            <Typography mt={2} component=\"h1\" variant=\"h5\">\r\n              <span className=\"heading\" >Login here.</span>\r\n            </Typography>\r\n            <TextField\r\n              inputlabelprops={{\r\n                style: { fontSize: 16, fontFamily: 'Arturo' },\r\n              }}\r\n              margin=\"normal\"\r\n              required\r\n              fullWidth\r\n              id=\"phone\"\r\n              label=\"Mobile Number\"\r\n              name=\"phone\"\r\n              value={data.phone}\r\n              autoComplete=\"phone\"\r\n              autoFocus\r\n              color=\"success\"\r\n              className=\"heading\"\r\n              // className=\"textfield\"\r\n              onChange={handleChange}\r\n            />\r\n            {/* <TextField\r\n              inputlabelprops={{\r\n                style: { fontSize: 16, fontFamily: \"monospace\" },\r\n              }}\r\n              margin=\"normal\"\r\n              required\r\n              fullWidth\r\n              name=\"password\"\r\n              label=\"Password\"\r\n              value={data.password}\r\n              type=\"password\"\r\n              id=\"password\"\r\n              autoComplete=\"current-password\"\r\n              color=\"success\"\r\n              className=\"textfield\"\r\n              onChange={handleChange}\r\n            /> */}\r\n            <Link className=\"form-link\" to={\"/Forgot\"} variant=\"body2\">\r\n              Forgot your password?\r\n            </Link>\r\n            <Button\r\n              className=\"form-btn\"\r\n              type=\"submit\"\r\n              color=\"success\"\r\n              variant=\"contained\"\r\n              size=\"large\"\r\n              sx={{ mt: 3, mb: 2 }}\r\n            >\r\n              Login\r\n            </Button>\r\n            <Typography className=\"form-link\" mt={2}>\r\n              <span className=\"heading\">New to Wingrow?</span>\r\n               <Link to=\"/Register\" variant=\"body2\" className=\"form-link\">\r\n                 Signup with us\r\n              </Link>\r\n            </Typography>\r\n          </form>\r\n        </div>\r\n      ) : (\r\n        <Spinner />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":["user","AuthService","SignIn","useEffect","window","location","reload","navigate","useNavigate","_useState","useState","_useState2","_slicedToArray","Loading","setLoading","_useState3","phone","password","_useState4","data","setData","_jsxs","className","children","_jsx","ToastContainer","position","autoClose","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnFocusLoss","draggable","pauseOnHover","theme","Spinner","src","alt","onSubmit","e","preventDefault","then","res","role","toast","progress","undefined","setTimeout","error","console","log","Typography","component","variant","mt","TextField","inputlabelprops","style","fontSize","fontFamily","margin","required","fullWidth","id","label","name","value","autoComplete","autoFocus","color","onChange","_e$target","target","prev","_objectSpread","_defineProperty","Link","to","Button","type","size","sx","mb"],"sourceRoot":""}